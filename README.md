# SMS Sender

An example application to apply microservices concepts that sends mass sms messages

## Premises

- The problem is a sms sender application: the corp has clients that need to send a lot of sms messages to their customers. They need a web interface to upload files with phone numbers and respective messages. Also they need to see a summarized visualization of the sending progress.
- Two types of users, the sender, that sends messages (duh) and the admin that sees info about the operation and manages the clients (senders)
- Two type of messages: template messages and already built messages
  - Template message: the user defines a template message and the bulk info of each recipient is applied to that template and that makes the final message to be sent
  - Already build message: the prebuilt message comes with the recipient's phone and we don't need to do any processing of them (in principle)

## Objectives

- Use microservices architechure
- Implement all aspects of an applcation for sending mass sms messages:
  - Ingestion (Clients send the numbers and the messages to send)
  - Authentication
  - SMS Sending service (The one that takes the complete message and phone number and sends them)
  - User Dashboard
  - Rest api to integrate with 3ยบ party applications
- Use Rust lang whenever possible

## General architecture

- Ingestion service
  - Processes the files and build the messages to be sent
- <strike>Web interface</strike> Desktop app (to use rust to implement that)
- Sender service (may be multiple)
- Rabbitmq as broker
- Public API (that also the <strike>web</strike> desktop interface uses)
- Auth service to handle users and permissions

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="921px" viewBox="-0.5 -0.5 921 291" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-01-09T01:29:07.135Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36&quot; etag=&quot;g7njdzNihD2J2KKHyslz&quot; version=&quot;16.2.4&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;KIi0nZslC2Re8F2K-52E&quot; name=&quot;Overall Architecture&quot;&gt;7ZnLjpswFIafhmVH2E4gWeYyM+0i0khZdLqqLDgN1hBMjcmlT18zmHBxLkwahXQUKQvOj23s3x+2D7HIZLl5FjQOZtyH0MK2v7HI1MIY9TC2sp/tb3PFJW4uLATzdaFSmLM/oEVbqynzIakVlJyHksV10eNRBJ6saVQIvq4X+8XD+lNjugBDmHs0NNXvzJeBVpEzLG98BbYI9KMHWI9vSYvCeiRJQH2+rkjk0SITwbnMr5abCYSZeYUveb2nA3d3HRMQyTYV0rAf/Z4MU+Yl0c/Z09iRr/yLbmVFw1QPeArJm+SxEkdxrHsut4UdgqeRD1mLtkXG64BJmMfUy+6uFQBKC+QyVBFSl7ptEBI2BzuNdlYohoAvQYqtKqIruNo8TQ8e6HhdmYvC4KAyDY7WqJ7+xa7l0iF1oU36gGHYMGyUqp5gew5ixZQRXTtGGpY5XTtGTMdipoRnKmFNt50bhnt1w9Cwa8d6hmPfogUk8pYoGzRezM5NcwzT5qAsETdkmus0SHO7Ns01TJtBkmRbIrbHgr9l9nVsWr/fMK3zLWBgmGaYpMgbZYcPFXkhTRLm1X2pmwgbJl/1nez6R6Y/9HU03VSKTbdFEKmhvFaDSq0sLKu9R0W9vKvgG6eexnyo4fBUeHAaHknFAuSpN9Oc38r89fdMX6EJCKlkq3p3982pfsILZ5Gs4EPq+BDSwCIfpq5VPT41G2queINGQ7kPRkPviO2GfT51wzOpS1S/5Edg3AsWOoHVXoSPAnxBEElLEPEdxAuAiMyc4V/Xv/8PuV5L5Nw7cpdAzsy67otfPYM/SSLpkkTUBAifSSImB47Q1yLRzGaf57MbymYHt5b+IzObJdYEW+OREl/U65l1nsZx0rl1DeeQ3bl1/Wste3sWMHR0ATuQflwv+UBtd+BO173PswObn1faofiZmGubZ/TuyF0CuXMz3hanu/IzyUfOd/aDM8S1bzQ2IceRVcELCKa8AHF5IJ2WQKJuD382OnFoa4sksptfUJvnyLOZVGH5V1xevPxDkzz+BQ==&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://viewer.diagrams.net/?client=1&amp;page=0&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:291px;"><defs/><g><rect x="0" y="220" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 250px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Desktop App</div></div></div></foreignObject><text x="60" y="254" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Desktop App</text></switch></g><rect x="300" y="0" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 30px; margin-left: 301px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Auth Service</div></div></div></foreignObject><text x="360" y="34" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Auth Service</text></switch></g><rect x="170" y="130" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 160px; margin-left: 171px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Api Gateway</div></div></div></foreignObject><text x="230" y="164" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Api Gateway</text></switch></g><rect x="310" y="230" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 260px; margin-left: 311px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Ingest Service</div></div></div></foreignObject><text x="370" y="264" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Ingest Service</text></switch></g><rect x="690" y="110" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 140px; margin-left: 691px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Sender Service</div></div></div></foreignObject><text x="750" y="144" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Sender Service</text></switch></g><rect x="480" y="120" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 150px; margin-left: 481px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Message Broker</div></div></div></foreignObject><text x="540" y="154" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Message Broker</text></switch></g><path d="M 600 150 L 683.67 140.7" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 688.89 140.12 L 682.32 144.38 L 683.67 140.7 L 681.55 137.42 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 290.9 123.7 L 299.1 66.3" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 290.16 128.89 L 287.68 121.47 L 290.9 123.7 L 294.61 122.46 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 299.84 61.11 L 302.32 68.53 L 299.1 66.3 L 295.39 67.54 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 430 230 L 475.5 184.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 479.21 180.79 L 476.73 188.22 L 475.5 184.5 L 471.78 183.27 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 125.46 216.72 L 164.54 193.28" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 120.96 219.42 L 125.16 212.82 L 125.46 216.72 L 128.76 218.82 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 169.04 190.58 L 164.84 197.18 L 164.54 193.28 L 161.24 191.18 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="800" y="0" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 30px; margin-left: 801px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">GSM Gateway</div></div></div></foreignObject><text x="860" y="34" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">GSM Gateway</text></switch></g><rect x="0" y="40" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 70px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">3ยบ Party apps</div></div></div></foreignObject><text x="60" y="74" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">3ยบ Party apps</text></switch></g><path d="M 125.46 103.28 L 164.54 126.72" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 120.96 100.58 L 128.76 101.18 L 125.46 103.28 L 125.16 107.18 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 169.04 129.42 L 161.24 128.82 L 164.54 126.72 L 164.84 122.82 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 290 190 L 307.15 224.3" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 309.5 229 L 303.24 224.3 L 307.15 224.3 L 309.5 221.17 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 773.04 111.98 L 854.53 63.27" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 859.04 60.57 L 854.83 67.17 L 854.53 63.27 L 851.24 61.16 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>

## Each service specifics

See each sub folder for info about them
